!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).VuetifyImageInput=t(e.Vue)}(this,(function(e){"use strict";function t(e,t){return e.map((function(e,n){return e+t[n]}))}function n(e,t){return e.map((function(e,n){return e-t[n]}))}function a(e){return Math.hypot.apply(Math,e)}function r(e,t){void 0===t&&(t=e);var n=a(t),r=0===n?0:1/n,i=t.map((function(e){return r*e}));return{distance:a(e),direction:i}}function i(e,t,n){var r=a(t),i=0===r?0:1/r,o=0===n?0:1/n,l=o*r,u=t.map((function(e){return o*e})),s=t.map((function(e){return i*e}));return{velocities:u,velocity:l,distance:a(e),direction:s}}function o(e){return Math.sign?Math.sign(e):Number(e>0)-Number(e<0)||+e}function l(e,t,n){return 0===t||Math.abs(t)===1/0?function(e,t){return Math.pow(e,5*t)}(e,n):e*t*n/(t+n*e)}function u(e,t,n,a){return void 0===a&&(a=.15),0===a?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-l(t-e,n-t,a)+t:e>n?+l(e-n,n-t,a)+n:e}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function p(){}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?p:1===t.length?t[0]:function(){for(var e,n,a=h(t);!(n=a()).done;){var r=n.value;e=r.apply(this,arguments)||e}return e}}function m(e,t){if(void 0===e){if(void 0===t)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function y(e,t){return Object.assign({},t,e||{})}function b(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.apply(void 0,n)}return e}function w(e,t){void 0===e&&(e={});for(var n={},a=0,r=Object.entries(t);a<r.length;a++){var i=r[a],o=i[0],l=i[1];switch(typeof l){case"function":n[o]=l.call(n,e[o],o,e);break;case"object":n[o]=w(e[o],l);break;case"boolean":l&&(n[o]=e[o])}}return n}var S={threshold:function(e){return void 0===e&&(e=0),m(e)},rubberband:function(e){switch(void 0===e&&(e=0),e){case!0:return m(.15);case!1:return m(0);default:return m(e)}},enabled:function(e){return void 0===e&&(e=!0),e},triggerAllEvents:function(e){return void 0===e&&(e=!1),e},initial:function(e){return void 0===e&&(e=0),"function"==typeof e?e:m(e)}},M=c({},S,{axis:!0,lockDirection:function(e){return void 0===e&&(e=!1),e},bounds:function(e){if(void 0===e&&(e={}),"function"==typeof e)return function(t){return M.bounds(e(t))};var t=e,n=t.left,a=void 0===n?-1/0:n,r=t.right,i=void 0===r?1/0:r,o=t.top,l=void 0===o?-1/0:o,u=t.bottom;return[[a,i],[l,void 0===u?1/0:u]]}}),_="undefined"!=typeof window&&window.document&&window.document.createElement,x={enabled:function(e){return void 0===e&&(e=!0),e},domTarget:!0,window:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return void 0===e&&(e=_?window:void 0),e})),eventOptions:function(e){var t=void 0===e?{}:e,n=t.passive,a=void 0===n||n,r=t.capture;return{passive:a,capture:void 0!==r&&r}}},E=c({},S,{bounds:function(e,t,n){var a=n.distanceBounds,r=void 0===a?{}:a,i=n.angleBounds,o=void 0===i?{}:i,l=function(e){var t=y(b(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},u=function(e){var t=y(b(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof r&&"function"!=typeof o?[l(),u()]:function(e){return[l(e),u(e)]}}}),G=c({},M,{threshold:function(e,t,n){var a=n.filterTaps,r=void 0!==a&&a,i=n.lockDirection,o=void 0!==i&&i,l=n.axis,u=m(e,r?3:o||(void 0===l?void 0:l)?1:0);return this.filterTaps=r||u[0]+u[1]>0,u},swipeVelocity:function(e){return void 0===e&&(e=.5),m(e)},swipeDistance:function(e){return void 0===e&&(e=60),m(e)},delay:function(e){switch(void 0===e&&(e=0),e){case!0:return 180;case!1:return 0;default:return e}}});function T(e){return void 0===e&&(e={}),w(e,M)}function I(e,t){void 0===e&&(e={}),void 0===t&&(t=new Set);var n=e,a=n.drag,r=n.wheel,i=n.move,o=n.scroll,l=n.pinch,u=n.hover,s=function(e){return void 0===e&&(e={}),w(e,x)}({eventOptions:n.eventOptions,window:n.window,domTarget:n.domTarget,enabled:n.enabled});return t.has("onDrag")&&(s.drag=function(e){return void 0===e&&(e={}),w(e,G)}(a)),t.has("onWheel")&&(s.wheel=T(r)),t.has("onScroll")&&(s.scroll=T(o)),t.has("onMove")&&(s.move=T(i)),t.has("onPinch")&&(s.pinch=function(e){return void 0===e&&(e={}),w(e,E)}(l)),t.has("onHover")&&(s.hover=c({enabled:!0},u)),s}function C(e){return c({_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:p,canceled:!1,memo:void 0,args:void 0},e)}function k(){return{shared:{hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},drag:C({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,_isTap:!0,_delayedEvent:!1,_pointerId:void 0,tap:!1,swipe:[0,0]}),pinch:C({da:[0,0],vdva:[0,0],origin:void 0,turns:0}),wheel:C({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),move:C({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),scroll:C({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0})}}var K=new Map,D=function(){function e(e,t){var n=this;void 0===t&&(t=[]),this.controller=e,this.args=t,this.debounced=!0,this.setTimeout=function(e,t){var a;void 0===t&&(t=140),clearTimeout(n.controller.timeouts[n.stateKey]);for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];n.controller.timeouts[n.stateKey]=(a=window).setTimeout.apply(a,[e,t].concat(i))},this.clearTimeout=function(){clearTimeout(n.controller.timeouts[n.stateKey])},this.fireGestureHandler=function(e){if(void 0===e&&(e=!1),n.state._blocked)return n.debounced||(n.state._active=!1,n.clean()),null;if(!e&&!n.state.intentional&&!n.config.triggerAllEvents)return null;if(n.state.intentional){var t=n.state.active,a=n.state._active;n.state.active=a,n.state.first=a&&!t,n.state.last=t&&!a,n.controller.state.shared[n.ingKey]=a}var r=c({},n.controller.state.shared,n.state,n.mapStateValues(n.state)),i=n.handler(r);return n.state.memo=void 0!==i?i:n.state.memo,n.state._active||n.clean(),r}}var a,r,i,o=e.prototype;return o.updateSharedState=function(e){Object.assign(this.controller.state.shared,e)},o.updateGestureState=function(e){Object.assign(this.state,e)},o.checkIntentionality=function(e,t){return{_intentional:e,_blocked:!1}},o.getMovement=function(e){var a=this.config,r=a.initial,i=a.bounds,o=a.rubberband,l=a.threshold,u=this.state,s=u._bounds,d=u._initial,v=u._active,f=u._intentional,h=u.lastOffset,p=u.movement,g=this.getInternalMovement(e,this.state),m=!1===f[0]?H(g[0],l[0]):f[0],y=!1===f[1]?H(g[1],l[1]):f[1],w=this.checkIntentionality([m,y],g);if(w._blocked)return c({},w,{_movement:g,delta:[0,0]});var S,M,_,x,E=w._intentional,G=g;(!1!==E[0]&&!1===f[0]&&(M=b(r,this.state),S=b(i,this.state),d[0]=M[0],s[0]=S[0]),!1!==E[1]&&!1===f[1])&&(M=null!==(_=M)&&void 0!==_?_:b(r,this.state),S=null!==(x=S)&&void 0!==x?x:b(i,this.state),d[1]=M[1],s[1]=S[1]);var T=[!1!==E[0]?g[0]-E[0]:d[0],!1!==E[1]?g[1]-E[1]:d[1]],I=t(T,h),C=v?o:[0,0];return T=O(s,t(T,d),C),c({},w,{intentional:!1!==E[0]||!1!==E[1],_initial:d,_movement:G,movement:T,values:e,offset:O(s,I,C),delta:n(T,p)})},o.clean=function(){this.clearTimeout()},a=e,(r=[{key:"config",get:function(){return this.controller.config[this.stateKey]}},{key:"enabled",get:function(){return this.controller.config.enabled&&this.config.enabled}},{key:"state",get:function(){return this.controller.state[this.stateKey]}},{key:"handler",get:function(){return this.controller.handlers[this.stateKey]}}])&&s(a.prototype,r),i&&s(a,i),e}();function H(e,t){return Math.abs(e)>=t&&o(e)*t}function O(e,t,n){var a=t[0],r=t[1],i=n[0],o=n[1],l=e[0],s=l[0],c=l[1],d=e[1],v=d[0],f=d[1];return[u(a,s,c,i),u(r,v,f,o)]}function P(e,t,n){var a=e.state,r=e.args,i=t.timeStamp,o=t.type,l=a.values;return{_lastEventType:o,event:t,timeStamp:i,elapsedTime:n?0:i-a.startTime,args:r,previous:l}}function R(e,t,n){var a=e.state.offset,r=n.timeStamp;return c({},k()[e.stateKey],{_active:!0,values:t,initial:t,offset:a,lastOffset:a,startTime:r})}function W(e,t){return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return e.call.apply(e,[this,c({},t,{event:n})].concat(r))}}var j=function(e){var t=this;this.classes=e,this.bind=function(){for(var e={},n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var i,o=h(t.classes);!(i=o()).done;){var l=i.value;new l(t,a).addBindings(e)}for(var u=0,s=Object.entries(t.nativeRefs);u<s.length;u++){var d=s[u],v=d[0],f=d[1];z(e,v,W(f,c({},t.state.shared,{args:a})))}return t.config.domTarget?V(t,e):$(t,e)},this.effect=function(){return t.config.domTarget&&t.bind(),t.clean},this.clean=function(){var e=N(t.config),n=t.config.eventOptions;e&&X(e,B(t.domListeners),n),Object.values(t.timeouts).forEach(clearTimeout),function(e){var t=e.config,n=t.window,a=t.eventOptions,r=e.windowListeners;if(!n)return;for(var i in r){X(n,r[i],a)}e.windowListeners={}}(t)},this.state=k(),this.timeouts={},this.domListeners=[],this.windowListeners={}};function A(e,t){var n=e.config,a=e.windowListeners;n.window&&(X(n.window,a[t],n.eventOptions),delete a[t])}function L(e,t,n){var a=e.config,r=e.windowListeners;void 0===n&&(n=[]),a.window&&(X(a.window,r[t],a.eventOptions),F(a.window,r[t]=n,a.eventOptions))}function V(e,t){var n=e.config,a=e.domListeners,r=N(n);if(!r)throw new Error("domTarget must be defined");var i=n.eventOptions;X(r,B(a),i);for(var o=0,l=Object.entries(t);o<l.length;o++){var u=l[o],s=u[0],c=u[1],d=s.slice(2).toLowerCase();a.push([d,g.apply(void 0,c)])}F(r,a,i)}function $(e,t){for(var n={},a=e.config.eventOptions.capture?"Capture":"",r=0,i=Object.entries(t);r<i.length;r++){var o=i[r],l=o[0],u=o[1],s=Array.isArray(u)?u:[u];n[l+a]=g.apply(void 0,s)}return n}function B(e){return void 0===e&&(e=[]),e.splice(0,e.length)}function N(e){var t=e.domTarget;return t&&"value"in t?t.value:t}function z(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function F(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});for(var a,r=h(t);!(a=r()).done;){var i=a.value,o=i[0],l=i[1];e.addEventListener(o,l,n)}}function X(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={});for(var a,r=h(t);!(a=r()).done;){var i=a.value,o=i[0],l=i[1];e.removeEventListener(o,l,n)}}function Y(t,n,a){void 0===a&&(a={});var r=function(e){var t=new Set;e.drag&&t.add(K.get("drag"));e.wheel&&t.add(K.get("wheel"));e.scroll&&t.add(K.get("scroll"));e.move&&t.add(K.get("move"));e.pinch&&t.add(K.get("pinch"));e.hover&&t.add(K.get("hover"));return t}(t),i=new j(r);return i.config=n,i.handlers=t,i.nativeRefs=a,e.onMounted(i.effect),i.config.domTarget?U:i.bind}function U(){"development"===process.env.NODE_ENV&&console.warn("Deprecation notice: When the `domTarget` option is specified, you don't need to write `useEffect(bind, [bind])` anymore: event binding is now made handled internally to this lib.\n\nNext version won't return anything when `domTarget` is provided, therefore your code will break if you try to call `useEffect`.")}var q=function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var a=t.prototype;return a.getInternalMovement=function(e,t){return n(e,t.initial)},a.checkIntentionality=function(e,t){if(!1===e[0]&&!1===e[1])return{_intentional:e,axis:this.state.axis};var n=t.map(Math.abs),a=n[0],r=n[1],i=this.state.axis||(a>r?"x":a<r?"y":void 0);return this.config.axis||this.config.lockDirection?i?this.config.axis&&i!==this.config.axis?{_intentional:e,_blocked:!0,axis:i}:(e["x"===i?1:0]=!1,{_intentional:e,_blocked:!1,axis:i}):{_intentional:[!1,!1],_blocked:!1,axis:i}:{_intentional:e,_blocked:!1,axis:i}},a.getKinematics=function(e,t){var n=this.getMovement(e);if(!n._blocked){var a=t.timeStamp-this.state.timeStamp;Object.assign(n,i(n.movement,n.delta,a))}return n},a.mapStateValues=function(e){return{xy:e.values,vxvy:e.velocities}},t}(D);function J(e){if("touches"in e){var t=e.targetTouches,n=e.changedTouches;return t.length>0?t:n}return null}function Q(e){var t="buttons"in e?e.buttons:0,n=J(e),a=n&&n.length||0;return{touches:a,down:a>0||t>0,buttons:t,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey}}function Z(e){var t=J(e),n=t?t[0]:e;return[n.clientX,n.clientY]}function ee(e){var t=e.currentTarget,n=t.scrollX,a=t.scrollY,r=t.scrollLeft,i=t.scrollTop;return[n||r||0,a||i||0]}function te(e){return[e.deltaX,e.deltaY]}function ne(e){return[260*e.scale,e.rotation]}function ae(e){var t,n=e.targetTouches,a=n[0],r=n[1],i=r.clientX-a.clientX,o=r.clientY-a.clientY,l=(r.clientX+a.clientX)/2,u=(r.clientY+a.clientY)/2,s="nativeEvent"in e?e.nativeEvent:e;return{values:[Math.hypot(i,o),null!==(t=s.rotation)&&void 0!==t?t:-180*Math.atan2(i,o)/Math.PI],origin:[l,u]}}var re=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="dragging",t.stateKey="drag",t.onDragStart=function(e){t.enabled&&!t.state._active&&(L(t.controller,t.stateKey,[["pointermove",t.onDragChange],["pointerup",t.onDragEnd],["pointercancel",t.onDragEnd]]),t.updateGestureState({_pointerId:e.pointerId}),t.config.delay>0?t.state._delayedEvent=!0:t.startDrag(e))},t.onDragChange=function(e){if(!t.state.canceled&&e.pointerId===t.state._pointerId)if(t.state._active){var n=Q(e);if(n.down){t.updateSharedState(n);var r=Z(e),i=t.getKinematics(r,e),o=P(v(t),e),l=t.state._isTap,u=a(i._movement);l&&u>=3&&(l=!1),t.updateGestureState(c({},o,i,{_isTap:l})),t.fireGestureHandler()}else t.onDragEnd(e)}else t.state._delayedEvent&&(t.clearTimeout(),t.startDrag(e))},t.onDragEnd=function(e){if(e.pointerId===t.state._pointerId){t.state._active=!1,t.updateSharedState({down:!1,buttons:0,touches:0});var n=t.state._isTap,a=t.state.velocities,r=a[0],i=a[1],l=t.state.movement,u=l[0],s=l[1],d=t.state._intentional,f=d[0],h=d[1],p=t.config.swipeVelocity,g=p[0],m=p[1],y=t.config.swipeDistance,b=y[0],w=y[1],S=c({},P(v(t),e),t.getMovement(t.state.values)),M=[0,0];S.elapsedTime<220&&(!1!==f&&Math.abs(r)>g&&Math.abs(u)>b&&(M[0]=o(r)),!1!==h&&Math.abs(i)>m&&Math.abs(s)>w&&(M[1]=o(i))),t.updateGestureState(c({},S,{tap:n,swipe:M})),t.fireGestureHandler(!0===n)}},t.clean=function(){e.prototype.clean.call(v(t)),t.state._delayedEvent=!1,A(t.controller,t.stateKey)},t.onCancel=function(){t.state.canceled||(t.updateGestureState({canceled:!0}),t.state._active=!1,t.updateSharedState({down:!1,buttons:0,touches:0}),requestAnimationFrame((function(){return t.fireGestureHandler()})))},t.onClick=function(e){t.state._isTap||e.stopPropagation()},t}d(t,e);var n=t.prototype;return n.startDrag=function(e){var t=Z(e);this.updateSharedState(Q(e)),this.updateGestureState(c({},R(this,t,e),P(this,e,!0),{_pointerId:e.pointerId,cancel:this.onCancel})),this.updateGestureState(this.getMovement(t)),this.fireGestureHandler()},n.addBindings=function(e){(z(e,"onPointerDown",this.onDragStart),this.config.filterTaps)&&z(e,this.controller.config.eventOptions.capture?"onClick":"onClickCapture",this.onClick)},t}(q),ie=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="pinching",t.stateKey="pinch",t.pinchShouldStart=function(e){var n=Q(e).touches;return t.enabled&&2===n},t.onPinchStart=function(e){if(t.pinchShouldStart(e)){var n=ae(e),a=n.values,r=n.origin;t.updateSharedState(Q(e)),t.updateGestureState(c({},R(v(t),a,e),P(v(t),e,!0),{cancel:t.onCancel,origin:r})),t.updateGestureState(t.getMovement(a)),t.fireGestureHandler()}},t.onPinchChange=function(e){var n=t.state,a=n.canceled,r=n._active;if(!a&&r){var i=Q(e);t.updateSharedState(i);var o=ae(e),l=o.values,u=o.origin,s=t.getKinematics(l,e);t.updateGestureState(c({},P(v(t),e),s,{origin:u})),t.fireGestureHandler()}},t.onPinchEnd=function(e){t.state.active&&(t.state._active=!1,t.updateSharedState({down:!1,touches:0}),t.updateGestureState(c({},P(v(t),e),t.getMovement(t.state.values))),t.fireGestureHandler())},t.onCancel=function(){t.state.canceled||(t.state._active=!1,t.updateGestureState({canceled:!0}),t.updateSharedState({down:!1,touches:0}),requestAnimationFrame((function(){return t.fireGestureHandler()})))},t.onGestureStart=function(e){if(t.enabled){e.preventDefault();var n=ne(e);t.updateSharedState(Q(e)),t.updateGestureState(c({},R(v(t),n,e),P(v(t),e,!0),{cancel:t.onCancel})),t.updateGestureState(t.getMovement(n)),t.fireGestureHandler()}},t.onGestureChange=function(e){var n=t.state,a=n.canceled,r=n._active;if(!a&&r){e.preventDefault();var i=Q(e);t.updateSharedState(i);var o=ne(e),l=t.getKinematics(o,e);t.updateGestureState(c({},P(v(t),e),l)),t.fireGestureHandler()}},t.onGestureEnd=function(e){e.preventDefault(),t.state.active&&(t.state._active=!1,t.updateSharedState({down:!1,touches:0}),t.updateGestureState(c({},P(v(t),e),t.getMovement(t.state.values))),t.fireGestureHandler())},t.wheelShouldRun=function(e){return t.enabled&&e.ctrlKey},t.getWheelValuesFromEvent=function(e){var n=te(e)[1],a=t.state.values,r=a[0],i=a[1];return{values:[r-n,void 0!==i?i:0],origin:[e.clientX,e.clientY],delta:[0,n]}},t.onWheel=function(e){t.wheelShouldRun(e)&&(t.setTimeout(t.onWheelEnd),t.state._active?t.onWheelChange(e):t.onWheelStart(e))},t.onWheelStart=function(e){var n=t.getWheelValuesFromEvent(e),a=n.values,r=n.delta,i=n.origin;e.cancelable?e.preventDefault():"development"===process.env.NODE_ENV&&console.warn("To properly support zoom on trackpads, try using the `domTarget` option and `config.eventOptions.passive` set to `false`. This message will only appear in development mode."),t.updateSharedState(Q(e)),t.updateGestureState(c({},R(v(t),a,e),P(v(t),e,!0),{initial:t.state.values,offset:a,delta:r,origin:i})),t.updateGestureState(t.getMovement(a)),t.fireGestureHandler()},t.onWheelChange=function(e){t.updateSharedState(Q(e));var n=t.getWheelValuesFromEvent(e),a=n.values,r=n.origin,i=n.delta;t.updateGestureState(c({},P(v(t),e),t.getKinematics(a,e),{origin:r,delta:i})),t.fireGestureHandler()},t.onWheelEnd=function(){t.state._active=!1,t.updateGestureState(t.getMovement(t.state.values)),t.fireGestureHandler()},t}return d(t,e),t.prototype.addBindings=function(e){this.controller.config.domTarget&&("undefined"==typeof window||null!==window.ontouchstart)&&function(){try{return"constructor"in GestureEvent}catch(e){return!1}}()?(z(e,"gestureStart",this.onGestureStart),z(e,"gestureChange",this.onGestureChange),z(e,"gestureEnd",this.onGestureEnd)):(z(e,"touchstart",this.onPinchStart),z(e,"touchmove",this.onPinchChange),z(e,"touchend",this.onPinchEnd),z(e,"touchcancel",this.onPinchEnd),z(e,"wheel",this.onWheel))},t}(function(e){function t(){return e.apply(this,arguments)||this}d(t,e);var a=t.prototype;return a.getInternalMovement=function(e,t){var a=t.values[1],r=e[0],i=e[1],l=void 0===i?a:i,u=l-a,s=t.turns;return Math.abs(u)>270&&(s+=o(u)),n([r,l-360*s],t.initial)},a.getKinematics=function(e,t){var n=this.getMovement(e),a=(e[1]-n.movement[1]-this.state.initial[1])/360,r=t.timeStamp-this.state.timeStamp;return c({turns:a},n,i(n.movement,n.delta,r))},a.mapStateValues=function(e){return{da:e.values,vdva:e.velocities}},t}(D)),oe=function(e){function n(){var n;return(n=e.apply(this,arguments)||this).ingKey="wheeling",n.stateKey="wheel",n.debounced=!0,n.handleEvent=function(e){if((!e.ctrlKey||!("pinch"in n.controller.handlers))&&n.enabled){n.setTimeout(n.onEnd),n.updateSharedState(Q(e));var a=t(te(e),n.state.values);if(n.state._active)n.updateGestureState(c({},P(v(n),e),n.getKinematics(a,e)));else{n.updateGestureState(c({},R(v(n),a,e),P(v(n),e,!0),{initial:n.state.values}));var i=n.getMovement(a),o=r(i.delta);n.updateGestureState(i),n.updateGestureState(o)}n.fireGestureHandler()}},n.onEnd=function(){var e=n.getMovement(n.state.values);n.updateGestureState(e),n.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),n.fireGestureHandler()},n}return d(n,e),n.prototype.addBindings=function(e){z(e,"onWheel",this.handleEvent)},n}(q),le=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="moving",t.stateKey="move",t.debounced=!0,t.onMove=function(e){t.enabled&&(t.setTimeout(t.onMoveEnd),t.state._active?t.onMoveChange(e):t.onMoveStart(e))},t.onMoveStart=function(e){t.updateSharedState(Q(e));var n=Z(e);t.updateGestureState(c({},R(v(t),n,e),P(v(t),e,!0))),t.updateGestureState(t.getMovement(n)),t.fireGestureHandler()},t.onMoveChange=function(e){t.updateSharedState(Q(e));var n=Z(e);t.updateGestureState(c({},P(v(t),e),t.getKinematics(n,e))),t.fireGestureHandler()},t.onMoveEnd=function(){var e=t.state.values;t.updateGestureState(t.getMovement(e)),t.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),t.fireGestureHandler()},t.onPointerEnter=function(e){if(t.controller.state.shared.hovering=!0,t.controller.config.enabled){if(t.controller.config.hover.enabled){var n=Z(e),a=c({},t.controller.state.shared,t.state,P(v(t),e,!0),{values:n,active:!0,hovering:!0});t.controller.handlers.hover(c({},a,t.mapStateValues(a)))}"move"in t.controller.handlers&&t.onMoveStart(e)}},t.onPointerLeave=function(e){if(t.controller.state.shared.hovering=!1,"move"in t.controller.handlers&&t.onMoveEnd(),t.controller.config.hover.enabled){var n=Z(e),a=c({},t.controller.state.shared,t.state,P(v(t),e),{values:n,active:!1});t.controller.handlers.hover(c({},a,t.mapStateValues(a)))}},t}return d(t,e),t.prototype.addBindings=function(e){"move"in this.controller.handlers&&z(e,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(z(e,"onPointerEnter",this.onPointerEnter),z(e,"onPointerLeave",this.onPointerLeave))},t}(q),ue=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).ingKey="scrolling",t.stateKey="scroll",t.debounced=!0,t.handleEvent=function(e){if(t.enabled){t.clearTimeout(),t.setTimeout(t.onEnd);var n=ee(e);if(t.updateSharedState(Q(e)),t.state._active)t.updateGestureState(c({},P(v(t),e),t.getKinematics(n,e)));else{t.updateGestureState(c({},R(v(t),n,e),P(v(t),e,!0),{initial:t.state.values}));var a=t.getMovement(n),i=r(a.delta);t.updateGestureState(a),t.updateGestureState(i)}t.fireGestureHandler()}},t.onEnd=function(){t.state._active=!1,t.updateGestureState(c({},t.getMovement(t.state.values),{velocities:[0,0],velocity:0})),t.fireGestureHandler()},t}return d(t,e),t.prototype.addBindings=function(e){z(e,"onScroll",this.handleEvent)},t}(q),se=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function ce(e,t){void 0===t&&(t={});var n=function(e){var t={},n={},a=new Set;for(var r in e)se.test(r)?(a.add(RegExp.lastMatch),n[r]=e[r]):t[r]=e[r];return[n,t,a]}(e),a=n[0],r=n[1],i=n[2];K.set("drag",re),K.set("hover",le),K.set("move",le),K.set("pinch",ie),K.set("scroll",ue),K.set("wheel",oe);var o=I(t,i),l={};return i.has("onDrag")&&(l.drag=de(a,"onDrag")),i.has("onWheel")&&(l.wheel=de(a,"onWheel")),i.has("onScroll")&&(l.scroll=de(a,"onScroll")),i.has("onMove")&&(l.move=de(a,"onMove")),i.has("onPinch")&&(l.pinch=de(a,"onPinch")),i.has("onHover")&&(l.hover=a.onHover),Y(l,o,r)}function de(e,t){var n=t+"Start",a=t+"End";return function(r){var i=void 0;return r.first&&n in e&&e[n](r),t in e&&(i=e[t](r)),r.last&&a in e&&e[a](r),i}}var ve={pointerEvents:"none",userDrag:"none",userSelect:"none"},fe={...ve,opacity:0,visibility:"hidden"},he={transition:"all .3s cubic-bezier(.25,.8,.5,1)"},pe={bottom:"50%",position:"absolute",right:"50%",transform:"translate(50%,50%)"},ge={position:"relative"},me={bottom:0,left:0,position:"absolute",right:0,top:0},ye={overflow:"hidden"};function be(e,t,n){return function(e,t,n){return{background:`url('data:image/svg+xml;base64,${btoa(e)}') center center / ${t}px ${t}px repeat ${n}`}}(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2" fill="${t}"><rect x="1" width="1" height="1"/><rect y="1" width="1" height="1"/></svg>`,2*e,n)}async function we(e){let t=new Image;return t.src=e,await t.decode(),t}async function Se(e,t){if(function(e){return"string"==typeof e}(e))return we(e);if(function(e){let{File:t}=globalThis;return t&&e instanceof t}(e))return async function(e,t){let n=new FileReader,a=new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("abort",t),n.addEventListener("error",t)}));return n.readAsDataURL(e),t.onabort=()=>{n.abort()},await a,t.onabort=null,we(n.result)}(e,t);throw new Error}function Me(e,t,n){return Math.min(Math.max(e,t),n)}return e.defineComponent({name:"VImageInput",props:{cancelIcon:{type:String,default:"$cancel"},clearable:{type:Boolean,default:!1},clearIcon:{type:String,default:"$clear"},disabled:{type:Boolean,default:!1},errorIcon:{type:String,default:"$error"},flipHorizontallyIcon:{type:String,default:"mdi-flip-horizontal"},flipVerticallyIcon:{type:String,default:"mdi-flip-vertical"},fullHeight:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},imageBackgroundColor:String,imageHeight:{type:Number,default:256},imageMaxHeight:{type:Number,default:512},imageMaxWidth:{type:Number,default:512},imageMinHeight:{type:Number,default:128},imageMinWidth:{type:Number,default:128},imageWidth:{type:Number,default:256},imageMaxScaling:{type:Number,default:1},imageMinScaling:{type:String,default:"cover"},modelValue:String,readonly:{type:Boolean,default:!1},resetable:{type:Boolean,default:!1},resetIcon:{type:String,default:"mdi-restore"},rotateClockwiseIcon:{type:String,default:"mdi-rotate-right"},rotateCounterClockwiseIcon:{type:String,default:"mdi-rotate-left"},successIcon:{type:String,default:"$success"},uploadIcon:{type:String,default:"mdi-upload"},zoomInIcon:{type:String,default:"mdi-magnify-plus-outline"},zoomOutIcon:{type:String,default:"mdi-magnify-minus-outline"}},setup(t,{emit:n}){let a=e.shallowRef(null),r=e.computed((()=>{let e=a.value;return e?e.naturalWidth:0})),i=e.computed((()=>{let e=a.value;return e?e.naturalHeight:0})),o=e.computed((()=>{let e=a.value;return e?e.src:null})),l=e.shallowRef(256),u=e.shallowRef(256),s=e.shallowRef(null),c=e.shallowRef(!1),d=()=>{c.value=!c.value},v=e.shallowRef(!1),f=()=>{v.value=!v.value},h=e.shallowRef(0),p=e=>{c.value!==v.value&&(e*=-1),h.value+=e},g=Math.PI/3,m=()=>{p(+g)},y=()=>{p(-g)},b=e.computed((()=>{let e=r.value,t=i.value,n=h.value;return e*Math.abs(Math.cos(n))+t*Math.abs(Math.sin(n))})),w=e.computed((()=>{let e=r.value,t=i.value,n=h.value;return e*Math.abs(Math.sin(n))+t*Math.abs(Math.cos(n))})),S=e.computed((()=>{switch(t.imageMinScaling){case"cover":return Math.max(t.imageWidth/b.value,t.imageHeight/w.value);case"contain":return Math.min(t.imageWidth/b.value,t.imageHeight/w.value)}return 0})),M=e.computed((()=>{let e=S.value,n=t.imageMaxScaling;return Math.max(e,n)})),_=e.customRef(((e,t)=>{let n=0;return{get(){e();let t=S.value,a=M.value;return Me(n,t,a)},set(e){n=e,t()}}})),x=e=>{_.value+=e},E=e.computed((()=>{let e=S.value;return(M.value-e)/10})),G=()=>{let e=E.value;x(+e)},T=()=>{let e=E.value;x(-e)};e.computed((()=>{let e=S.value;return(M.value-e)/1e3}));let I=e.computed((()=>-1/0)),C=e.computed((()=>1/0)),k=e.customRef(((e,t)=>{let n=0;return{get(){e();let t=I.value,a=C.value;return Me(n,t,a)},set(e){n=e,t()}}})),K=e.computed((()=>-1/0)),D=e.computed((()=>1/0)),H=e.customRef(((e,t)=>{let n=0;return{get(){e();let t=K.value,a=D.value;return Me(n,t,a)},set(e){n=e,t()}}})),O=(e,t)=>{let n=c.value,a=v.value,r=h.value,i=_.value;n&&(e*=-1),a&&(t*=-1),e/=i,t/=i;let o=Math.sin(r),l=Math.cos(r);k.value+=e*l+t*o,H.value-=e*o-t*l},P=()=>{a.value=null},R={},W={},j={},A=e.shallowRef(null);e.computed((()=>A.value===R)),e.computed((()=>A.value===W)),e.computed((()=>A.value===j));let L=null,V=async e=>{L&&(L.abort(),L=null),L=new AbortController;let{signal:t}=L;try{A.value=R;let n=await Se(e,t);t.aborted||(A.value=W,a.value=n)}catch{t.aborted||(A.value=j)}};e.watch((()=>t.modelValue),(e=>{if(e){s.value!==e&&V(e)}else P()}),{immediate:!0}),e.watch(s,(e=>{n("update:modelValue",e)})),e.watch((()=>{let e=a.value;if(e){let n=r.value,a=i.value,{imageFormat:o,imageQuality:s}=t,d=l.value,f=u.value,p=c.value,g=v.value,m=k.value,y=H.value,b=h.value,w=_.value,S=document.createElement("canvas"),M=S.getContext("2d");return S.width=d,S.height=f,M.translate(d/2,f/2),M.scale(w,w),M.scale(p?-1:1,g?-1:1),M.rotate(b),M.translate(m,y),M.drawImage(e,-n/2,-a/2),S.toDataURL(`image/${o}`,s)}return null}),(e=>{s.value=e}));let $=e=>{e.preventDefault();let t=document.createElement("input");t.setAttribute("type","file"),t.addEventListener("change",(e=>{e.preventDefault();let{files:t}=e.target;if(t&&t.length){let[e]=t;V(e)}})),t.click()},B=e.shallowRef(!0),N=ce({onDrag({delta:[e,t]}){console.log("onDrag"),O(e,t)},onDragStart(){B.value=!1},onDragEnd(){B.value=!0}});return()=>{let n=e.resolveComponent("VBtn"),r=(a,r)=>{let{disabled:i}=t;return e.h(n,{disabled:i,icon:a,onClick:r})},{clearable:i,disabled:p,readonly:g}=t,b=a.value,w=o.value,S=l.value,M=u.value;s.value;let x=c.value,E=v.value,I=k.value,C=H.value,K=h.value,D=_.value,R=B.value;return e.h("div",{style:{display:"inline-grid",gridTemplateColumns:"1fr auto",gridTemplateRows:"1fr auto"}},[e.h("div",{style:{...be(8,"#fff","#000"),...ye,...ge,gridColumn:1,gridRow:1,minHeight:`${M+50}px`,minWidth:`${S+50}px`}},w?[e.h("div",{style:{...pe,width:`${S}px`,height:`${M}px`},onPointerdown:N().onPointerDown},[e.h("div",{style:{...pe,...ve}},[e.h("img",{src:w,style:{display:"block",transform:[`scale(${D})`,`scale(${[x?-1:1,E?-1:1].join(",")})`,`rotate(${K}rad)`,`translate(${I}px,${C}px)`].join(" "),...R?{transition:"all .3s cubic-bezier(.25,.8,.5,1)"}:{}}})]),e.h("div",{style:{...me,boxShadow:"0 0 4000px 4000px rgba(0,0,0,0.5)",outline:"4px solid #fff"}})])]:[e.h(n,{icon:"mdi-upload",onClick:$})]),e.h("div",{style:{display:"flex",flexDirection:"column",gridColumn:2,gridRow:1,justifyContent:"center",...he,...b?{}:fe}},[...g?[]:[...i?[r(t.clearIcon,P)]:[],r(t.flipHorizontallyIcon,d),r(t.flipVerticallyIcon,f),r(t.rotateClockwiseIcon,m),r(t.rotateCounterClockwiseIcon,y)],e.h("div",{onClick(){O(0,-10)}},"UP"),e.h("div",{onClick(){O(0,10)}},"DOWN"),e.h("div",{onClick(){O(-10,0)}},"LEFT"),e.h("div",{onClick(){O(10,0)}},"RIGHT")]),e.h("div",{style:{gridColumn:1,gridRow:2,...he,...b?{}:fe}},g?[]:[e.h("div",{style:{display:"flex",justifyContent:"space-between"}},[r(t.zoomOutIcon,T),r(t.zoomInIcon,G)]),e.h("div",{style:{whiteSpace:"pre-wrap"}},JSON.stringify({translationHorizontally:I,translationVertically:C,zoom:D},null,"  "))])])}}})}));
